version: v1beta1
kind: Spicepod
name: spice-oss-docs

datasets:
  - from: github:github.com/spiceai/docs/files/trunk
    name: spiceai.docs
    description: Spice.ai OSS documentation and reference, from https://docs.spiceai.org
    metadata:
      instructions: |
        Documents are stored in Markdown. Always provide citations.
        When generating reference links for docs, use https://docs.spiceai.org/<docs_path> as a template
        Exclude `spiceaidocs/docs` prefix from docs path and `.md` file extension.
        Also replace `/index.md` with `/` in the path.
      reference_base_url: https://docs.spiceai.org/<docs_path>
    params:
      github_token: ${secrets:GITHUB_TOKEN}
      include: 'spiceaidocs/docs/**/*.md'
    acceleration:
      enabled: true
      refresh_check_interval: 12h
      refresh_jitter_enabled: true
      refresh_jitter_max: 1m

  - from: github:github.com/spiceai/samples/files/trunk
    name: spiceai.samples
    description: Spice.ai OSS samples
    metadata:
      instructions: Documents are stored in Markdown. Always provide citations.
      reference_base_url: https://github.com/spiceai/samples/tree/trunk/<sample_path>
    params:
      github_token: ${secrets:GITHUB_TOKEN}
      include: '**/*.md'
    acceleration:
      enabled: true
      refresh_check_interval: 12h
      refresh_jitter_enabled: true
      refresh_jitter_max: 1m

  - from: github:github.com/spiceai/quickstarts/files/trunk
    name: spiceai.quickstarts
    description: Spice.ai OSS quickstarts
    metadata:
      instructions: Documents are stored in Markdown. Always provide citations.
      reference_base_url: https://github.com/spiceai/quickstarts/tree/trunk/<quickstart_path>
    params:
      github_token: ${secrets:GITHUB_TOKEN}
      include: '**/*.md'
    acceleration:
      enabled: true
      refresh_check_interval: 12h
      refresh_jitter_enabled: true
      refresh_jitter_max: 1m

  - from: github:github.com/spiceai/blog/files/trunk
    name: spiceai.blog
    description: Spice.ai OSS blog posts
    metadata:
      instructions: |
        This dataset provides access to the Spice.ai OSS project blog posts in Markdown format. The content is sourced from the Spice.ai OSS blog repository at https://github.com/spiceai/blog.
      reference_base_url: https://github.com/spiceai/blog/tree/trunk/content/posts/<post_path>
    params:
      github_token: ${secrets:GITHUB_TOKEN}
      include: 'content/posts/**/*.md'
    acceleration:
      enabled: true
      refresh_check_interval: 1d
      refresh_jitter_enabled: true
      refresh_jitter_max: 10m
