"use strict";(self.webpackChunkspiceaidocs=self.webpackChunkspiceaidocs||[]).push([[1432],{1643:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>p,frontMatter:()=>c,metadata:()=>a,toc:()=>h});var t=i(4848),r=i(8453),s=i(1470),l=i(9365);const c={title:"ODBC: Open Database Connectivity",sidebar_label:"ODBC",sidebar_position:4,description:"ODBC API Documentation",pagination_prev:null,pagination_next:null},o=void 0,a={id:"api/odbc/index",title:"ODBC: Open Database Connectivity",description:"ODBC API Documentation",source:"@site/docs/api/odbc/index.md",sourceDirName:"api/odbc",slug:"/api/odbc/",permalink:"/api/odbc/",draft:!1,unlisted:!1,editUrl:"https://github.com/spiceai/docs/tree/trunk/spiceaidocs/docs/api/odbc/index.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{title:"ODBC: Open Database Connectivity",sidebar_label:"ODBC",sidebar_position:4,description:"ODBC API Documentation",pagination_prev:null,pagination_next:null},sidebar:"docsSidebar"},d={},h=[{value:"Install and configure the Flight SQL ODBC driver",id:"install-and-configure-the-flight-sql-odbc-driver",level:2},{value:"Download and install the Flight SQL ODBC driver",id:"download-and-install-the-flight-sql-odbc-driver",level:3},{value:"Configure Flight SQL ODBC driver",id:"configure-flight-sql-odbc-driver",level:3},{value:"ODBC Connection Parameters",id:"odbc-connection-parameters",level:3},{value:"Execute Test Query",id:"execute-test-query",level:2}];function u(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"https://learn.microsoft.com/en-us/sql/odbc/microsoft-open-database-connectivity-odbc",children:"ODBC"})," (Open Database Connectivity) is a low-level, high-performance interface that is designed specifically for relational data stores as a standard way to connect to, and interact with a database."]}),"\n",(0,t.jsxs)(n.p,{children:["Spice supports ODBC clients through an ODBC driver implementation based on the ",(0,t.jsx)(n.a,{href:"https://arrow.apache.org/docs/format/FlightSql.html",children:"Flight SQL"})," protocol. This enables ODBC-compatible applications to connect to Spice, execute queries, and retrieve data."]}),"\n",(0,t.jsx)(n.admonition,{title:"Limitations",type:"warning",children:(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"ODBC support is currently in alpha, and not all functionality is supported"}),"\n",(0,t.jsx)(n.li,{children:"The Arrow Flight SQL ODBC driver is not available for 32-bit Windows versions"}),"\n",(0,t.jsx)(n.li,{children:"The Arrow Flight SQL ODBC driver is not supported on the Apple ARM architecture"}),"\n"]})}),"\n",(0,t.jsx)(n.h2,{id:"install-and-configure-the-flight-sql-odbc-driver",children:"Install and configure the Flight SQL ODBC driver"}),"\n",(0,t.jsx)(n.h3,{id:"download-and-install-the-flight-sql-odbc-driver",children:"Download and install the Flight SQL ODBC driver"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Download and install the driver from the ",(0,t.jsx)(n.a,{href:"https://www.dremio.com/drivers/odbc/",children:"ODBC driver download page"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://docs.dremio.com/current/sonar/client-applications/drivers/arrow-flight-sql-odbc-driver/#downloading-and-installing-on-windows",children:"Windows instructions"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://docs.dremio.com/current/sonar/client-applications/drivers/arrow-flight-sql-odbc-driver/#downloading-and-installing-on-linux",children:"Linux"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://docs.dremio.com/current/sonar/client-applications/drivers/arrow-flight-sql-odbc-driver/#downloading-and-installing-on-macos",children:"macOS instructions"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"configure-flight-sql-odbc-driver",children:"Configure Flight SQL ODBC driver"}),"\n",(0,t.jsxs)(s.A,{children:[(0,t.jsxs)(l.A,{value:"default",label:"Windows",default:!0,children:[(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Open ",(0,t.jsx)(n.strong,{children:"Start Menu"})," -> ",(0,t.jsx)(n.strong,{children:"Windows Administrative Tools"})," -> click ",(0,t.jsx)(n.strong,{children:"ODBC Data Sources (64-bit)"})]}),"\n",(0,t.jsxs)(n.li,{children:["In the ",(0,t.jsx)(n.strong,{children:"ODBC Data Source Administrator (64-bit)"})," dialog, click ",(0,t.jsx)(n.strong,{children:"System DSN"})]}),"\n"]}),(0,t.jsx)("img",{width:"600",alt:"ODBC Data Source Administrator",src:"/img/odbc/spice-odbc-windows-config.png"}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Select ",(0,t.jsx)(n.strong,{children:"Arrow Flight SQL ODBC DSN"})," and click ",(0,t.jsx)(n.strong,{children:"Configure"})]}),"\n",(0,t.jsxs)(n.li,{children:["Specify Spice.ai OSS runtime ",(0,t.jsx)(n.code,{children:"HOST"}),", ",(0,t.jsx)(n.code,{children:"PORT"}),", in the ",(0,t.jsx)(n.code,{children:"UseEncryption"})," field, specify one of these values:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"true"}),", if ",(0,t.jsx)(n.a,{href:"https://docs.spiceai.org/api/tls",children:"Spice is configured for encrypted communication (TLS)"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"false"}),", otherwise"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["For descriptions of all the parameters, see ",(0,t.jsx)(n.a,{href:"#odbc-connection-parameters",children:"ODBC Connection Parameters"}),"."]}),"\n"]})]}),(0,t.jsxs)(l.A,{value:"linux",label:"Linux",default:!0,children:[(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Ensure that ",(0,t.jsx)(n.code,{children:"unixODBC"})," is installed. To verify whether ",(0,t.jsx)(n.code,{children:"unixODBC"})," is installed, execute the following commands:"]}),"\n"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"which odbcinst\nwhich isql\n"})}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Copy the content of the ",(0,t.jsx)(n.code,{children:"odbc.ini"})," and ",(0,t.jsx)(n.code,{children:"odbcinst.ini"})," from the ",(0,t.jsx)(n.code,{children:"/opt/arrow-flight-sql-odbc-driver/conf"})," and paste into your system ",(0,t.jsx)(n.code,{children:"/etc/odbc.ini"})," and ",(0,t.jsx)(n.code,{children:"/etc/odbcinst.ini"})," files"]}),"\n",(0,t.jsxs)(n.li,{children:["Edit ",(0,t.jsx)(n.code,{children:"odbc.ini"}),": specify Spice.ai OSS runtime ",(0,t.jsx)(n.code,{children:"HOST"}),", ",(0,t.jsx)(n.code,{children:"PORT"}),", in the ",(0,t.jsx)(n.code,{children:"UseEncryption"})," field, specify one of these values:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"true"}),", if ",(0,t.jsx)(n.a,{href:"https://docs.spiceai.org/api/tls",children:"Spice is configured for encrypted communication (TLS)"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"false"}),", otherwise"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["For descriptions of all the parameters, see ",(0,t.jsx)(n.a,{href:"#odbc-connection-parameters",children:"ODBC Connection Parameters"})]}),"\n",(0,t.jsxs)(n.li,{children:["Run this command to verify ",(0,t.jsx)(n.code,{children:"unixODBC"})," configuration"]}),"\n"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"odbcinst -j\n"})})]}),(0,t.jsxs)(l.A,{value:"macos",label:"macOS",children:[(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Ensure that ",(0,t.jsx)(n.a,{href:"http://www.odbcmanager.net/",children:"ODBC Manager"})," is installed."]}),"\n",(0,t.jsxs)(n.li,{children:["Launch ",(0,t.jsx)(n.strong,{children:"ODBC Manager"})," -> ",(0,t.jsx)(n.strong,{children:"System DSN"})," page, select ",(0,t.jsx)(n.strong,{children:"Arrow Flight SQL ODBC DSN"})," and click ",(0,t.jsx)(n.strong,{children:"Configure"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Specify Spice.ai OSS runtime ",(0,t.jsx)(n.code,{children:"HOST"}),", ",(0,t.jsx)(n.code,{children:"PORT"}),", in the ",(0,t.jsx)(n.code,{children:"UseEncryption"})," field, specify one of these values:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"true"}),", if ",(0,t.jsx)(n.a,{href:"https://docs.spiceai.org/api/tls",children:"Spice is configured for encrypted communication (TLS)"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"false"}),", otherwise"]}),"\n"]}),"\n"]}),"\n"]}),(0,t.jsx)("img",{width:"600",alt:"ODBC Data Source Administrator",src:"/img/odbc/spice-odbc-macos-config.png"}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["For descriptions of all the parameters, see ",(0,t.jsx)(n.a,{href:"#odbc-connection-parameters",children:"ODBC Connection Parameters"}),"."]}),"\n"]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"odbc-connection-parameters",children:"ODBC Connection Parameters"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Name"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"host"}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{children:"The IP address or hostname for the Spice runtime."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"port"}),(0,t.jsx)(n.td,{children:"integer"}),(0,t.jsx)(n.td,{children:"The Spice runtime Arrow Flight endpoint port number"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"useEncryption"}),(0,t.jsx)(n.td,{children:"integer"}),(0,t.jsxs)(n.td,{children:["Configures the driver to use an SSL-encrypted connection. Accepted values: ",(0,t.jsx)(n.code,{children:"true"})," (default) - The client communicates with the Spice runtime only using SSL encryption and ",(0,t.jsx)(n.code,{children:"false"})," - SSL encryption is disabled."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"disableCertificateVerification"}),(0,t.jsx)(n.td,{children:"integer"}),(0,t.jsxs)(n.td,{children:["Specifies whether the driver should verify the host certificate against the trust store. Default is ",(0,t.jsx)(n.code,{children:"false"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"useSystemTrustStore"}),(0,t.jsx)(n.td,{children:"integer"}),(0,t.jsxs)(n.td,{children:["Controls whether to use a CA certificate from the system's trust store, or from a specified .pem file. If ",(0,t.jsx)(n.code,{children:"true"})," - The driver verifies the connection using a certificate in the system trust store. IF ",(0,t.jsx)(n.code,{children:"false"})," - The driver verifies the connection using the .pem file specified by the ",(0,t.jsx)(n.code,{children:"trustedCerts"})," parameter. ",(0,t.jsx)(n.code,{children:"true"})," on Windows and macOS, ",(0,t.jsx)(n.code,{children:"false"})," on Linux by default"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"trustedCerts"}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{children:"The full path of the .pem file containing certificates trusted by a CA, for the purpose of verifying the server. If this option is not set, then the driver defaults to using the trusted CA certificates .pem file installed by the driver."})]})]})]}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["The ODBC driver for Arrow Flight SQL does not support password-protected ",(0,t.jsx)(n.code,{children:".pem/.crt"})," files or multiple ",(0,t.jsx)(n.code,{children:".crt"})," certificates in a single ",(0,t.jsx)(n.code,{children:".pem/.crt"})," file."]})}),"\n",(0,t.jsx)(n.h2,{id:"execute-test-query",children:"Execute Test Query"}),"\n",(0,t.jsx)(n.p,{children:"Ensure Spice runtime has started:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"spiced --flight 0.0.0.0:50051\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"2024-10-06T20:06:50.084017Z  INFO runtime::opentelemetry: Spice Runtime OpenTelemetry listening on 127.0.0.1:50052\n2024-10-06T20:06:50.084015Z  INFO runtime::flight: Spice Runtime Flight listening on 0.0.0.0:50051\n2024-10-06T20:06:50.086948Z  INFO runtime::http: Spice Runtime HTTP listening on 127.0.0.1:8090\n2024-10-06T20:06:50.297512Z  INFO runtime: Initialized results cache; max size: 128.00 MiB, item ttl: 1s\n2024-10-06T20:06:50.308775Z  INFO runtime: Tool [document_similarity] ready to use\n2024-10-06T20:06:50.308803Z  INFO runtime: Tool [table_schema] ready to use\n2024-10-06T20:06:50.308814Z  INFO runtime: Tool [sql] ready to use\n2024-10-06T20:06:50.308829Z  INFO runtime: Tool [list_datasets] ready to use\n2024-10-06T20:06:50.921420Z  INFO runtime: Dataset taxi_trips registered (s3://spiceai-demo-datasets/taxi_trips/2024/), results cache enabled.\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Configure the client app to use ",(0,t.jsx)(n.code,{children:"Arrow Flight SQL ODBC Driver"}),"."]}),"\n",(0,t.jsx)("img",{width:"800",alt:"Example ODBC Client Configuration",src:"/img/odbc/spice-odbc-example-config.png"}),"\n",(0,t.jsx)(n.p,{children:"Run a sample query, such as"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"SELECT trip_distance, total_amount FROM taxi_trips ORDER BY trip_distance DESC LIMIT 10;\n"})}),"\n",(0,t.jsx)("img",{width:"800",alt:"Example Query Results",src:"/img/odbc/spice-odbc-example-query.png"})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(u,{...e})}):u(e)}},9365:(e,n,i)=>{i.d(n,{A:()=>l});i(6540);var t=i(4164);const r={tabItem:"tabItem_Ymn6"};var s=i(4848);function l(e){let{children:n,hidden:i,className:l}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,t.A)(r.tabItem,l),hidden:i,children:n})}},1470:(e,n,i)=>{i.d(n,{A:()=>S});var t=i(6540),r=i(4164),s=i(3104),l=i(6347),c=i(205),o=i(7485),a=i(1682),d=i(679);function h(e){return t.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,t.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function u(e){const{values:n,children:i}=e;return(0,t.useMemo)((()=>{const e=n??function(e){return h(e).map((e=>{let{props:{value:n,label:i,attributes:t,default:r}}=e;return{value:n,label:i,attributes:t,default:r}}))}(i);return function(e){const n=(0,a.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,i])}function p(e){let{value:n,tabValues:i}=e;return i.some((e=>e.value===n))}function x(e){let{queryString:n=!1,groupId:i}=e;const r=(0,l.W6)(),s=function(e){let{queryString:n=!1,groupId:i}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!i)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return i??null}({queryString:n,groupId:i});return[(0,o.aZ)(s),(0,t.useCallback)((e=>{if(!s)return;const n=new URLSearchParams(r.location.search);n.set(s,e),r.replace({...r.location,search:n.toString()})}),[s,r])]}function f(e){const{defaultValue:n,queryString:i=!1,groupId:r}=e,s=u(e),[l,o]=(0,t.useState)((()=>function(e){let{defaultValue:n,tabValues:i}=e;if(0===i.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!p({value:n,tabValues:i}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${i.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const t=i.find((e=>e.default))??i[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:s}))),[a,h]=x({queryString:i,groupId:r}),[f,m]=function(e){let{groupId:n}=e;const i=function(e){return e?`docusaurus.tab.${e}`:null}(n),[r,s]=(0,d.Dv)(i);return[r,(0,t.useCallback)((e=>{i&&s.set(e)}),[i,s])]}({groupId:r}),j=(()=>{const e=a??f;return p({value:e,tabValues:s})?e:null})();(0,c.A)((()=>{j&&o(j)}),[j]);return{selectedValue:l,selectValue:(0,t.useCallback)((e=>{if(!p({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);o(e),h(e),m(e)}),[h,m,s]),tabValues:s}}var m=i(2303);const j={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var g=i(4848);function b(e){let{className:n,block:i,selectedValue:t,selectValue:l,tabValues:c}=e;const o=[],{blockElementScrollPositionUntilNextRender:a}=(0,s.a_)(),d=e=>{const n=e.currentTarget,i=o.indexOf(n),r=c[i].value;r!==t&&(a(n),l(r))},h=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const i=o.indexOf(e.currentTarget)+1;n=o[i]??o[0];break}case"ArrowLeft":{const i=o.indexOf(e.currentTarget)-1;n=o[i]??o[o.length-1];break}}n?.focus()};return(0,g.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":i},n),children:c.map((e=>{let{value:n,label:i,attributes:s}=e;return(0,g.jsx)("li",{role:"tab",tabIndex:t===n?0:-1,"aria-selected":t===n,ref:e=>o.push(e),onKeyDown:h,onClick:d,...s,className:(0,r.A)("tabs__item",j.tabItem,s?.className,{"tabs__item--active":t===n}),children:i??n},n)}))})}function v(e){let{lazy:n,children:i,selectedValue:s}=e;const l=(Array.isArray(i)?i:[i]).filter(Boolean);if(n){const e=l.find((e=>e.props.value===s));return e?(0,t.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,g.jsx)("div",{className:"margin-top--md",children:l.map(((e,n)=>(0,t.cloneElement)(e,{key:n,hidden:e.props.value!==s})))})}function y(e){const n=f(e);return(0,g.jsxs)("div",{className:(0,r.A)("tabs-container",j.tabList),children:[(0,g.jsx)(b,{...n,...e}),(0,g.jsx)(v,{...n,...e})]})}function S(e){const n=(0,m.A)();return(0,g.jsx)(y,{...e,children:h(e.children)},String(n))}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>c});var t=i(6540);const r={},s=t.createContext(r);function l(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);