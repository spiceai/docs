"use strict";(self.webpackChunkspiceaidocs=self.webpackChunkspiceaidocs||[]).push([[3694],{823:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>c,toc:()=>d});var a=n(4848),r=n(8453),s=n(1470),i=n(9365);const l={title:"Apache Superset",sidebar_label:"Apache Superset",sidebar_position:10,description:"Use Apache Superset to query and visualize datasets loaded in Spice."},o=void 0,c={id:"clients/superset/index",title:"Apache Superset",description:"Use Apache Superset to query and visualize datasets loaded in Spice.",source:"@site/docs/clients/superset/index.md",sourceDirName:"clients/superset",slug:"/clients/superset/",permalink:"/clients/superset/",draft:!1,unlisted:!1,editUrl:"https://github.com/spiceai/docs/tree/trunk/spiceaidocs/docs/clients/superset/index.md",tags:[],version:"current",sidebarPosition:10,frontMatter:{title:"Apache Superset",sidebar_label:"Apache Superset",sidebar_position:10,description:"Use Apache Superset to query and visualize datasets loaded in Spice."},sidebar:"tutorialSidebar",previous:{title:"DBeaver",permalink:"/clients/DBeaver/"},next:{title:"Tableau",permalink:"/clients/tableau/"}},u={},d=[{value:"Start Apache Superset with Flight SQL &amp; DataFusion SQL Dialect support",id:"start-apache-superset-with-flight-sql--datafusion-sql-dialect-support",level:2},{value:"Generic / Virtual Machine",id:"generic--virtual-machine",level:2},{value:"Docker Container",id:"docker-container",level:2},{value:"Temporary Docker Container Modification",id:"temporary-docker-container-modification",level:2},{value:"Configure a Spice Connection",id:"configure-a-spice-connection",level:2}];function p(e){const t={a:"a",blockquote:"blockquote",code:"code",h2:"h2",hr:"hr",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(t.p,{children:["Use ",(0,a.jsx)(t.a,{href:"https://superset.apache.org/",children:"Apache Superset"})," to query and visualize datasets loaded in Spice."]}),"\n",(0,a.jsxs)(t.blockquote,{children:["\n",(0,a.jsx)(t.p,{children:"Apache Superset is a modern, enterprise-ready business intelligence web application. It is fast, lightweight, intuitive, and loaded with options that make it easy for users of all skill sets to explore and visualize their data, from simple pie charts to highly detailed deck.gl geospatial charts."}),"\n",(0,a.jsxs)(t.p,{children:["\u2013 ",(0,a.jsx)(t.a,{href:"https://superset.apache.org/docs/intro/",children:"Apache Superset documentation"})]}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"start-apache-superset-with-flight-sql--datafusion-sql-dialect-support",children:"Start Apache Superset with Flight SQL & DataFusion SQL Dialect support"}),"\n",(0,a.jsxs)(t.p,{children:["Superset requires a Python ",(0,a.jsx)(t.a,{href:"https://peps.python.org/pep-0249/",children:"DB API 2"})," database driver and a ",(0,a.jsx)(t.a,{href:"https://www.sqlalchemy.org/",children:"SQLAlchemy"})," dialect to be installed for each connected datastore. Spice implements a Flight SQL server that understands the DataFusion SQL Dialect. The ",(0,a.jsx)(t.a,{href:"https://pypi.org/project/flightsql-dbapi/",children:(0,a.jsx)(t.code,{children:"flightsql-dbapi"})})," library for Python provides the required DB API 2 driver and SQLAlchemy dialect."]}),"\n",(0,a.jsx)(t.p,{children:"Select the appropriate tab based on whether you are experimenting with this feature or integrating it into an existing Superset instance."}),"\n",(0,a.jsxs)(s.A,{children:[(0,a.jsxs)(i.A,{value:"experimenting",label:"Experimenting",default:!0,children:[(0,a.jsxs)(t.p,{children:["The easiest way to connect Apache Superset and Spice is to follow the ",(0,a.jsxs)(t.a,{href:"https://github.com/spiceai/samples/tree/trunk/sales-bi",children:[(0,a.jsx)(t.code,{children:"Sales BI"})," sample"]}),". This sample builds a local Docker image based on Apache Superset that is pre-configured with the ",(0,a.jsx)(t.code,{children:"flightsql-dbapi"})," library needed to connect to Spice."]}),(0,a.jsxs)(t.p,{children:["Clone the Spice samples repository and navigate to the ",(0,a.jsx)(t.code,{children:"sales-bi"})," directory:"]}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:"git clone https://github.com/spiceai/samples.git\ncd samples/sales-bi\n"})}),(0,a.jsx)(t.p,{children:"Start Apache Superset along with the Spice runtime in Docker Compose:"}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:"make start\n"})}),(0,a.jsxs)(t.p,{children:["Log into Apache Superset at ",(0,a.jsx)(t.a,{href:"http://localhost:8088",children:"http://localhost:8088"})," with the username and password ",(0,a.jsx)(t.code,{children:"admin/admin"}),"."]}),(0,a.jsxs)(t.p,{children:["Follow the below steps to configure a database connection to Spice manually, or run ",(0,a.jsx)(t.code,{children:"make import-dashboards"})," to automatically configure the connection and create a sample dashboard."]})]}),(0,a.jsxs)(i.A,{value:"existing",label:"Integrating with Existing Superset",children:[(0,a.jsx)(t.h2,{id:"generic--virtual-machine",children:"Generic / Virtual Machine"}),(0,a.jsxs)(t.p,{children:["Install the ",(0,a.jsx)(t.code,{children:"flightsql-dbapi"})," library in your existing Apache Superset environment:"]}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:"pip install flightsql-dbapi\n"})}),(0,a.jsx)(t.h2,{id:"docker-container",children:"Docker Container"}),(0,a.jsx)(t.p,{children:"Install the library in the Dockerfile:"}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-Dockerfile",children:"FROM apache/superset\n# Switching to root to install the required packages\nUSER root\n# https://github.com/influxdata/flightsql-dbapi\nRUN pip install flightsql-dbapi\n# Switching back to using the `superset` user\nUSER superset\n"})}),(0,a.jsx)(t.p,{children:"Re-deploy Apache Superset with the updated Docker image."}),(0,a.jsx)(t.h2,{id:"temporary-docker-container-modification",children:"Temporary Docker Container Modification"}),(0,a.jsx)(t.p,{children:"It's possible to modify a running Docker container to install the library, but the change will be lost on container restart."}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:"docker exec -u root -it superset /bin/bash\n\npip install flightsql-dbapi\n"})})]})]}),"\n",(0,a.jsx)(t.hr,{}),"\n",(0,a.jsx)(t.h2,{id:"configure-a-spice-connection",children:"Configure a Spice Connection"}),"\n",(0,a.jsx)(t.p,{children:"Once Apache Superset is up and running, and you are logged in, you can configure a connection to Spice."}),"\n",(0,a.jsxs)(t.p,{children:["Hover over the ",(0,a.jsx)(t.code,{children:"Settings"})," menu and select ",(0,a.jsx)(t.code,{children:"Database Connections"}),"."]}),"\n",(0,a.jsx)("img",{width:"200",src:"/img/superset/superset-docs-connection-settings.png"}),"\n",(0,a.jsxs)(t.p,{children:["Click the ",(0,a.jsx)(t.code,{children:"+ Database"})," button to configure the connection."]}),"\n",(0,a.jsx)("img",{width:"800",src:"/img/superset/superset-docs-new-db.png"}),"\n",(0,a.jsxs)(t.p,{children:["Under ",(0,a.jsx)(t.code,{children:"Supported Databases"})," select ",(0,a.jsx)(t.code,{children:"Other"}),"."]}),"\n",(0,a.jsxs)(t.p,{children:["Set the Display Name to ",(0,a.jsx)(t.code,{children:"Spice"})," and the SQL Alchemy URI to ",(0,a.jsx)(t.code,{children:"datafusion+flightsql://spiceai_host:[spiceai_port]"}),". Specify ",(0,a.jsx)(t.code,{children:"?insecure=true"})," to skip connecting over TLS."]}),"\n",(0,a.jsxs)(t.p,{children:["Example: ",(0,a.jsx)(t.code,{children:"datafusion+flightsql://spiceai-sales-bi-demo:50051?insecure=true"}),"."]}),"\n",(0,a.jsxs)(t.p,{children:["Click ",(0,a.jsx)(t.code,{children:"Test Connection"})," to verify the connection."]}),"\n",(0,a.jsx)("img",{width:"800",src:"/img/superset/superset-docs-test-conn.png"}),"\n",(0,a.jsxs)(t.p,{children:["Click ",(0,a.jsx)(t.code,{children:"Connect"})," to save the connection."]}),"\n",(0,a.jsx)(t.p,{children:"Start exploring the datasets loaded in Spice by creating a new dataset in Apache Superset to match one of the existing tables."})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(p,{...e})}):p(e)}},9365:(e,t,n)=>{n.d(t,{A:()=>i});n(6540);var a=n(4164);const r={tabItem:"tabItem_Ymn6"};var s=n(4848);function i(e){let{children:t,hidden:n,className:i}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,a.A)(r.tabItem,i),hidden:n,children:t})}},1470:(e,t,n)=>{n.d(t,{A:()=>y});var a=n(6540),r=n(4164),s=n(3104),i=n(6347),l=n(205),o=n(7485),c=n(1682),u=n(9466);function d(e){return a.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function p(e){const{values:t,children:n}=e;return(0,a.useMemo)((()=>{const e=t??function(e){return d(e).map((e=>{let{props:{value:t,label:n,attributes:a,default:r}}=e;return{value:t,label:n,attributes:a,default:r}}))}(n);return function(e){const t=(0,c.X)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function h(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function b(e){let{queryString:t=!1,groupId:n}=e;const r=(0,i.W6)(),s=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,o.aZ)(s),(0,a.useCallback)((e=>{if(!s)return;const t=new URLSearchParams(r.location.search);t.set(s,e),r.replace({...r.location,search:t.toString()})}),[s,r])]}function m(e){const{defaultValue:t,queryString:n=!1,groupId:r}=e,s=p(e),[i,o]=(0,a.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!h({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const a=n.find((e=>e.default))??n[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:s}))),[c,d]=b({queryString:n,groupId:r}),[m,g]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[r,s]=(0,u.Dv)(n);return[r,(0,a.useCallback)((e=>{n&&s.set(e)}),[n,s])]}({groupId:r}),f=(()=>{const e=c??m;return h({value:e,tabValues:s})?e:null})();(0,l.A)((()=>{f&&o(f)}),[f]);return{selectedValue:i,selectValue:(0,a.useCallback)((e=>{if(!h({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);o(e),d(e),g(e)}),[d,g,s]),tabValues:s}}var g=n(2303);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var x=n(4848);function j(e){let{className:t,block:n,selectedValue:a,selectValue:i,tabValues:l}=e;const o=[],{blockElementScrollPositionUntilNextRender:c}=(0,s.a_)(),u=e=>{const t=e.currentTarget,n=o.indexOf(t),r=l[n].value;r!==a&&(c(t),i(r))},d=e=>{let t=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const n=o.indexOf(e.currentTarget)+1;t=o[n]??o[0];break}case"ArrowLeft":{const n=o.indexOf(e.currentTarget)-1;t=o[n]??o[o.length-1];break}}t?.focus()};return(0,x.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":n},t),children:l.map((e=>{let{value:t,label:n,attributes:s}=e;return(0,x.jsx)("li",{role:"tab",tabIndex:a===t?0:-1,"aria-selected":a===t,ref:e=>o.push(e),onKeyDown:d,onClick:u,...s,className:(0,r.A)("tabs__item",f.tabItem,s?.className,{"tabs__item--active":a===t}),children:n??t},t)}))})}function v(e){let{lazy:t,children:n,selectedValue:r}=e;const s=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=s.find((e=>e.props.value===r));return e?(0,a.cloneElement)(e,{className:"margin-top--md"}):null}return(0,x.jsx)("div",{className:"margin-top--md",children:s.map(((e,t)=>(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==r})))})}function S(e){const t=m(e);return(0,x.jsxs)("div",{className:(0,r.A)("tabs-container",f.tabList),children:[(0,x.jsx)(j,{...e,...t}),(0,x.jsx)(v,{...e,...t})]})}function y(e){const t=(0,g.A)();return(0,x.jsx)(S,{...e,children:d(e.children)},String(t))}},8453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>l});var a=n(6540);const r={},s=a.createContext(r);function i(e){const t=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),a.createElement(s.Provider,{value:t},e.children)}}}]);