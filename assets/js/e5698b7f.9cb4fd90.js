"use strict";(self.webpackChunkspiceaidocs=self.webpackChunkspiceaidocs||[]).push([[3811],{7319:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>i,contentTitle:()=>c,default:()=>l,frontMatter:()=>a,metadata:()=>o,toc:()=>d});var t=r(4848),n=r(8453);const a={title:"AWS Secrets Manager Secret Store",sidebar_label:"AWS Secrets Manager Secret Store",sidebar_position:3,description:"AWS Secrets Manager Secret Store Documentation"},c=void 0,o={id:"components/secret-stores/aws-secrets-manager/index",title:"AWS Secrets Manager Secret Store",description:"AWS Secrets Manager Secret Store Documentation",source:"@site/docs/components/secret-stores/aws-secrets-manager/index.md",sourceDirName:"components/secret-stores/aws-secrets-manager",slug:"/components/secret-stores/aws-secrets-manager/",permalink:"/components/secret-stores/aws-secrets-manager/",draft:!1,unlisted:!1,editUrl:"https://github.com/spiceai/docs/tree/trunk/spiceaidocs/docs/components/secret-stores/aws-secrets-manager/index.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"AWS Secrets Manager Secret Store",sidebar_label:"AWS Secrets Manager Secret Store",sidebar_position:3,description:"AWS Secrets Manager Secret Store Documentation"},sidebar:"docsSidebar",previous:{title:"Environment Secret Store",permalink:"/components/secret-stores/env/"},next:{title:"Kubernetes Secret Store",permalink:"/components/secret-stores/kubernetes/"}},i={},d=[{value:"Example",id:"example",level:2},{value:"AWS Secrets Manager Access",id:"aws-secrets-manager-access",level:2}];function m(e){const s={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",...(0,n.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"aws_secrets_manager"})," store enables Spice to read secrets from ",(0,t.jsx)(s.a,{href:"https://aws.amazon.com/secrets-manager/",children:"AWS Secrets Manager"})," by specifying the secret\u2019s name with a selector."]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-yaml",children:"secrets:\n  from: aws_secrets_manager:my_secret_name\n  name: aws\n"})}),"\n",(0,t.jsxs)(s.p,{children:["The store reads keys from the secret named in the selector. In the above example ",(0,t.jsx)(s.code,{children:"my_secret_name"})," must be defined in ",(0,t.jsx)(s.a,{href:"https://console.aws.amazon.com/secretsmanager/listsecrets",children:"AWS Secrets Manager"}),", and any keys referenced using ",(0,t.jsx)(s.code,{children:"${aws:my_key}"})," will look for a key ",(0,t.jsx)(s.code,{children:"my_key"})," within ",(0,t.jsx)(s.code,{children:"my_secret_name"}),"."]}),"\n",(0,t.jsx)("img",{src:"/img/secrets-aws-secrets-manager-1.png",alt:"",width:"800"}),"\n",(0,t.jsx)("img",{src:"/img/secrets-aws-secrets-manager-2.png",alt:"",width:"800"}),"\n",(0,t.jsx)(s.h2,{id:"example",children:"Example"}),"\n",(0,t.jsx)(s.p,{children:"A complete spicepod definition with a dataset that uses a secret from AWS Secrets Manager."}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-yaml",children:"version: v1beta1\nkind: Spicepod\nname: taxi_trips\nsecrets:\n  - from: aws_secrets_manager:dremio\n    name: dremio\n\ndatasets:\n- from: dremio:datasets.taxi_trips\n  name: taxi_trips\n  description: dremio taxi trips\n  params:\n    dremio_endpoint: grpc://20.163.171.81:32010\n    dremio_username: ${dremio:username}\n    dremio_password: ${dremio:password}\n"})}),"\n",(0,t.jsx)(s.h2,{id:"aws-secrets-manager-access",children:"AWS Secrets Manager Access"}),"\n",(0,t.jsxs)(s.p,{children:["To use AWS Secrets Manager, an AWS account and a user in IAM Identity Center with the ",(0,t.jsx)(s.code,{children:"secretsmanager:GetSecretValue"})," permission are required. Read ",(0,t.jsx)(s.a,{href:"https://docs.aws.amazon.com/secretsmanager/latest/userguide/auth-and-access.html",children:"Authentication and access control for AWS Secrets Manager"})," for details."]}),"\n",(0,t.jsxs)(s.p,{children:["Use the ",(0,t.jsx)(s.a,{href:"https://docs.aws.amazon.com/cli/v1/userguide/cli-chap-authentication.html",children:"AWS CLI"})," to configure AWS access:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"aws configure\n"})}),"\n",(0,t.jsx)(s.p,{children:"Check configuration with:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"aws sts get-caller-identity\naws secretsmanager get-secret-value --secret-id MyTestSecret\n"})})]})}function l(e={}){const{wrapper:s}={...(0,n.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(m,{...e})}):m(e)}},8453:(e,s,r)=>{r.d(s,{R:()=>c,x:()=>o});var t=r(6540);const n={},a=t.createContext(n);function c(e){const s=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:c(e.components),t.createElement(a.Provider,{value:s},e.children)}}}]);