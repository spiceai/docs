<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.85.0"><meta name=ROBOTS content="INDEX, FOLLOW"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Manifest syntax for Spice.ai Pods | Spice.ai Docs</title><meta name=description content="Detailed documentation on the Spice.ai Pod manifest syntax"><meta property="og:title" content="Manifest syntax for Spice.ai Pods"><meta property="og:description" content="Detailed documentation on the Spice.ai Pod manifest syntax"><meta property="og:type" content="website"><meta property="og:url" content="/reference/pod/"><meta property="og:site_name" content="Spice.ai Docs"><meta itemprop=name content="Manifest syntax for Spice.ai Pods"><meta itemprop=description content="Detailed documentation on the Spice.ai Pod manifest syntax"><meta name=twitter:card content="summary"><meta name=twitter:title content="Manifest syntax for Spice.ai Pods"><meta name=twitter:description content="Detailed documentation on the Spice.ai Pod manifest syntax"><link rel=preload href=/scss/main.min.e9a3a5947fc7bce24afebfdb928b8e0b61cc860626d03ef167c0051242b2abbd.css as=style><link href=/scss/main.min.e9a3a5947fc7bce24afebfdb928b8e0b61cc860626d03ef167c0051242b2abbd.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script><link rel=preload href=/scss/extend.min.0946b1e9cec61216e6413d71cd58ba139e46fd4e4aab6ec4dfc9b8f8a8836615.css as=style><link href=/scss/extend.min.0946b1e9cec61216e6413d71cd58ba139e46fd4e4aab6ec4dfc9b8f8a8836615.css rel=stylesheet integrity></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/><span class=navbar-logo></span><span class=font-weight-bold>Spice.ai Docs</span></a><ul class="navbar-nav navbar-nav-left ml-4 mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/api><span>API</span></a><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/cli><span>CLI</span></a><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/reference><span>Reference</span></a></li></ul><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=https://github.com/spiceai target=_blank><span>GitHub</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=https://blog.spiceai.org/posts target=_blank><span>Blog</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=https://discord.com/channels/803820740868571196/803820740868571199 target=_blank><span>Discord</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="collapse td-sidebar-nav" id=td-section-nav><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m--li><a href=/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-><span></span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-concepts-li><a href=/concepts/ title="Spice.ai concepts" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-concepts><span>Concepts</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-getting-started-li><a href=/getting-started/ title="Getting started with Spice.ai" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-getting-started><span>Getting started</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-getting-startedinstall-spiceai-li><a href=/getting-started/install-spiceai/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedinstall-spiceai><span>Install Spice.ai</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-getting-startedtrain-pod-li><a href=/getting-started/train-pod/ title="Create your first Spice.ai pod and train it" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedtrain-pod><span>Train a Spice.ai pod</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-getting-startednext-steps-li><a href=/getting-started/next-steps/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startednext-steps><span>Next steps</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-deep-learning-ai-li><a href=/deep-learning-ai/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-deep-learning-ai><span>Deep Learning AI</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-deep-learning-aiinterface-li><a href=/deep-learning-ai/interface/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-deep-learning-aiinterface><span>Interface</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-deep-learning-aivpg-li><a href=/deep-learning-ai/vpg/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-deep-learning-aivpg><span>Vanilla Policy Gradient</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-deep-learning-aidql-li><a href=/deep-learning-ai/dql/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-deep-learning-aidql><span>Deep Q-Learning</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-api-li><a href=/api/ title="Spice.ai API documentation" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-api><span>API</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-cli-li><a href=/cli/ title="Spice.ai CLI documentation" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-cli><span>CLI</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-clireference-li><a href=/cli/reference/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-clireference><span>Spice.ai CLI command reference</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-reference-li><a href=/reference/ title="Spice.ai Reference Docs" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-reference><span>Reference</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-referencepod-li><a href=/reference/pod/ title="Manifest syntax for Spice.ai Pods" class="align-left pl-0 active td-sidebar-link td-sidebar-link__section" id=m-referencepod><span class=td-sidebar-nav-active-item>Pod specification</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencepodsamples-gardener-li><a href=/reference/pod/samples-gardener/ title=Gardener class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-referencepodsamples-gardener><span>Example - Gardener</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencepodquickstarts-trader-li><a href=/reference/pod/quickstarts-trader/ title=Trader class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-referencepodquickstarts-trader><span>Example - Trader</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencepodsamples-serverops-li><a href=/reference/pod/samples-serverops/ title="Server Ops" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-referencepodsamples-serverops><span>Example - Server Ops</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referenceduration-li><a href=/reference/duration/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-referenceduration><span>Duration literals</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencetimestamp-li><a href=/reference/timestamp/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-referencetimestamp><span>Timestamps</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-acknowledgements-li><a href=/acknowledgements/ title="Open Source Acknowledgements" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-acknowledgements><span>Acknowledgements</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-install-li><a href=/install/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-install><span></span></a></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#about-yaml-syntax-for-pod-manifests>About YAML syntax for pod manifests</a></li><li><a href=#name><code>name</code></a></li><li><a href=#params><code>params</code></a><ul><li><a href=#paramsepoch_time><code>params.epoch_time</code></a></li><li><a href=#paramsperiod><code>params.period</code></a></li><li><a href=#paramsinterval><code>params.interval</code></a></li><li><a href=#paramsgranularity><code>params.granularity</code></a></li><li><a href=#paramsepisodes><code>params.episodes</code></a></li></ul></li><li><a href=#dataspaces><code>dataspaces</code></a><ul><li><a href=#dataspacesfrom><code>dataspaces[*].from</code></a></li><li><a href=#dataspacesname><code>dataspaces[*].name</code></a></li><li><a href=#dataspacesfields><code>dataspaces[*].fields</code></a></li><li><a href=#dataspacesfieldsname><code>dataspaces[*].fields[*].name</code></a></li><li><a href=#dataspacesfieldsinitializer><code>dataspaces[*].fields[*].initializer</code></a></li><li><a href=#dataspacesdata><code>dataspaces[*].data</code></a></li><li><a href=#dataspacesdataconnector><code>dataspaces[*].data.connector</code></a></li><li><a href=#dataspacesdataconnectorname><code>dataspaces[*].data.connector.name</code></a></li><li><a href=#dataspacesdataconnectorparams><code>dataspaces[*].data.connector.params</code></a></li><li><a href=#dataspacesdataprocessor><code>dataspaces[*].data.processor</code></a></li><li><a href=#dataspacesdataprocessorname><code>dataspaces[*].data.processor.name</code></a></li><li><a href=#dataspacesdataprocessorparams><code>dataspaces[*].data.processor.params</code></a></li><li><a href=#dataspacesactions><code>dataspaces[*].actions</code></a></li><li><a href=#dataspaceslaws><code>dataspaces[*].laws</code></a></li></ul></li><li><a href=#actions><code>actions</code></a><ul><li><a href=#actionsname><code>actions[*].name</code></a></li><li><a href=#actionsdo><code>actions[*].do</code></a></li><li><a href=#actionsdoname><code>actions[*].do.name</code></a></li><li><a href=#actionsdoargs><code>actions[*].do.args</code></a></li></ul></li><li><a href=#training><code>training</code></a><ul><li><a href=#traininggoal><code>training.goal</code></a></li><li><a href=#trainingreward_init><code>training.reward_init</code></a></li><li><a href=#trainingrewards><code>training.rewards</code></a></li><li><a href=#trainingrewardsreward><code>training.rewards[*].reward</code></a></li><li><a href=#trainingrewardswith><code>training.rewards[*].with</code></a></li></ul></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class="d-none d-md-block d-print-none"><ol class="breadcrumb spb-1"><li class=breadcrumb-item><a href=/reference/>Reference</a></li><li class="breadcrumb-item active" aria-current=page><a href=/reference/pod/>Pod specification</a></li></ol></nav><div class=td-content><h1>Manifest syntax for Spice.ai Pods</h1><div class=lead>Detailed documentation on the Spice.ai Pod manifest syntax</div><header class=article-meta></header><h2 id=about-yaml-syntax-for-pod-manifests>About YAML syntax for pod manifests</h2><p>Pod manifests use YAML syntax, and must end in a <code>.yaml</code> file extension. If you&rsquo;re new to YAML and want to learn more, see &ldquo;<a href=https://learnxinyminutes.com/docs/yaml/>Learn YAML in Y minutes</a>.&rdquo;</p><p>You must store pod manifest files in the <code>spicepods</code> directory of your application code. It is not required for the <code>spicepods</code> directory to be located at the root of your code repository.</p><h2 id=name><code>name</code></h2><p>The name of your pod. Spice.ai uses the name of your pod when rendering the dashboard and as the key for the API requests. If you omit <code>name</code>, Spice.ai sets it to the name of the YAML file excluding the <code>.yaml</code> extension.</p><h2 id=params><code>params</code></h2><p>An optional <code>map</code> of parameters that you can specify to tune how Spice.ai interacts with your pod. The following parameters are available:</p><table><thead><tr><th>Parameter</th><th>Default</th></tr></thead><tbody><tr><td><a href=#paramsepoch_time>epoch_time</a></td><td>Now - <code>period</code></td></tr><tr><td><a href=#paramsperiod>period</a></td><td>3 days (3d)</td></tr><tr><td><a href=#interval>interval</a></td><td>1 minute (1m)</td></tr><tr><td><a href=#granularity>granularity</a></td><td>10 seconds (10s)</td></tr><tr><td><a href=#episodes>episodes</a></td><td>10</td></tr></tbody></table><p><strong>Example</strong></p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#204a87;font-weight:700>params</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>epoch_time</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>1605312000</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>period</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>3d</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>interval</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>1m</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>granularity</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>10s</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>episodes</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></code></pre></div><h3 id=paramsepoch_time><code>params.epoch_time</code></h3><p>An epoch defines the beginning, or start, of the data stream. If Spice.ai receives data from before the epoch time, it is not used during training.</p><p>If <code>epoch</code> is omitted, it defaults to <code>now</code> - <a href=#paramsperiod><code>period</code></a>.</p><p><code>epoch_time</code> is an integer <a href=/reference/timestamp/>timestamp</a>.</p><p><strong>Example</strong></p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#204a87;font-weight:700>params</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>epoch_time</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>1605312000</span><span style=color:#f8f8f8;text-decoration:underline>
</span></code></pre></div><h3 id=paramsperiod><code>params.period</code></h3><p>A period is the total span of time that is considered for a pod. The end of the data stream that Spice.ai will look at is the <code>epoch</code> + <code>period</code>.</p><p>If <code>period</code> is omitted, it defaults to 3 days (<code>3d</code>).</p><p><code>period</code> is a <a href=/reference/duration/>duration literal</a>.</p><p><strong>Example</strong></p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#204a87;font-weight:700>params</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>period</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>3d</span><span style=color:#f8f8f8;text-decoration:underline>
</span></code></pre></div><h3 id=paramsinterval><code>params.interval</code></h3><p>The interval is the time span that Spice.ai uses as a single input to the neural networks that power Spice.ai. Attempting to get a recommendation without Spice.ai having at least one intervals worth of data will result in an error.</p><p>If <code>interval</code> is omitted, it defaults to 1 minute (<code>1m</code>).</p><p><code>interval</code> is a <a href=/reference/duration/>duration literal</a>.</p><p><strong>Example</strong></p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#204a87;font-weight:700>params</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>interval</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>1m</span><span style=color:#f8f8f8;text-decoration:underline>
</span></code></pre></div><h3 id=paramsgranularity><code>params.granularity</code></h3><p>The granularity is the smallest unit of time that specifies how many timesteps there are in an interval. The <code>granularity</code> cannot be larger than the <code>interval</code>. When streaming data in a continuous manner, the Spice.ai runtime can give a new recommendation for action after each new granularity&rsquo;s worth of data is collected.</p><p>If <code>granularity</code> is omitted, it defaults to 10 seconds (<code>10s</code>).</p><p><code>granularity</code> is a <a href=/reference/duration/>duration literal</a>. The smallest granularity Spice.ai supports is 1 second (<code>1s</code>).</p><p><strong>Example</strong></p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#204a87;font-weight:700>params</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>granularity</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>10s</span><span style=color:#f8f8f8;text-decoration:underline>
</span></code></pre></div><h3 id=paramsepisodes><code>params.episodes</code></h3><p>An episode is a sequence of simulated actions the Spice.ai pod will take over the dataset during training. After an episode has completed in a training run, the neural networks powering Spice.ai will update giving it a chance to learn from its experience. The more episodes specified, the more chances the Spice.ai pod will be able to learn how to maximize its rewards, at the expense of a longer training run. More episodes is not always better, as there is a risk the Spice.ai pod will &ldquo;<a href=https://en.wikipedia.org/wiki/Overfitting>overfit</a>&rdquo; to the data available in the training run.</p><p>If <code>episodes</code> is omitted, it defaults to 10.</p><p><code>episodes</code> is a positive integer.</p><p><strong>Example</strong></p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#204a87;font-weight:700>params</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>episodes</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8;text-decoration:underline>
</span></code></pre></div><h2 id=dataspaces><code>dataspaces</code></h2><p>A pod must contain at least one <a href=/concepts/#dataspace>dataspace</a>.</p><p><strong>Example</strong></p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#204a87;font-weight:700>dataspaces</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>from</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>coinbase</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>btcusd</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>fields</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>close</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>data</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>connector</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>file</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>params</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>path</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>data/btcusd.csv</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>processor</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>csv</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>from</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>local</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>portfolio</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>fields</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>usd_balance</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>initializer</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>btc_balance</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>initializer</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>actions</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>small_buy</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>|</span><span style=color:#8f5902;font-style:italic>
</span><span style=color:#8f5902;font-style:italic>        usd_balance -= args.price
</span><span style=color:#8f5902;font-style:italic>        btc_balance += 1</span><span style=color:#f8f8f8;text-decoration:underline>        
</span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>large_buy</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>|</span><span style=color:#8f5902;font-style:italic>
</span><span style=color:#8f5902;font-style:italic>        usd_balance -= args.price
</span><span style=color:#8f5902;font-style:italic>        btc_balance += 10</span><span style=color:#f8f8f8;text-decoration:underline>        
</span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>sell</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>|</span><span style=color:#8f5902;font-style:italic>
</span><span style=color:#8f5902;font-style:italic>        usd_balance += args.price 
</span><span style=color:#8f5902;font-style:italic>        btc_balance -= 1</span><span style=color:#f8f8f8;text-decoration:underline>        
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>laws</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#000>usd_balance &gt;= 0</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#000>btc_balance &gt;= 0</span><span style=color:#f8f8f8;text-decoration:underline>
</span></code></pre></div><h3 id=dataspacesfrom><code>dataspaces[*].from</code></h3><p><strong>Required</strong>. A label used to indicate where the data is from.</p><p><strong>Example</strong></p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#204a87;font-weight:700>dataspaces</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>from</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>coinbase</span><span style=color:#f8f8f8;text-decoration:underline>
</span></code></pre></div><h3 id=dataspacesname><code>dataspaces[*].name</code></h3><p><strong>Required</strong>. The name to use for this datasource.</p><p><strong>Example</strong></p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#204a87;font-weight:700>dataspaces</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>from</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>coinbase</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>btcusd</span><span style=color:#f8f8f8;text-decoration:underline>
</span></code></pre></div><h3 id=dataspacesfields><code>dataspaces[*].fields</code></h3><p><strong>Required</strong>. The fields to create in the dataspace. If these fields are not populated by either a data connector or through the API, they will use the default value of <code>0.0</code>. Each field must be a <code>float</code>.</p><h3 id=dataspacesfieldsname><code>dataspaces[*].fields[*].name</code></h3><p><strong>Required</strong>. The name of the field to create.</p><p><strong>Example</strong></p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#204a87;font-weight:700>fields</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>balance</span><span style=color:#f8f8f8;text-decoration:underline>
</span></code></pre></div><h3 id=dataspacesfieldsinitializer><code>dataspaces[*].fields[*].initializer</code></h3><p>May be used to specify an initial value for the field.</p><p><code>initializer</code> is a <code>float</code>.</p><p><strong>Example</strong></p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#204a87;font-weight:700>fields</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>balance</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>initializer</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>10.0</span><span style=color:#f8f8f8;text-decoration:underline>
</span></code></pre></div><h3 id=dataspacesdata><code>dataspaces[*].data</code></h3><p>Used to specify the external data source (configured with <code>connector</code> and <code>processor</code>) to use to populate the dataspace.</p><p>If this section is omitted, the data should be provided through the <a href=/api/>observations API</a>.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#204a87;font-weight:700>data</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>connector</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>file</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>params</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>path</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>data.csv</span><span style=color:#f8f8f8;text-decoration:underline>
</span></code></pre></div><h3 id=dataspacesdataconnector><code>dataspaces[*].data.connector</code></h3><p>The connector used to fetch data from an external data source. The connector code should exist in the <a href=https://github.com/spiceai/data-components-contrib/tree/trunk/dataconnectors>data-components-contrib</a> repository.</p><h3 id=dataspacesdataconnectorname><code>dataspaces[*].data.connector.name</code></h3><p>The name of the connector to use.</p><p>The following connectors are currently supported:</p><table><thead><tr><th>Connector Name</th></tr></thead><tbody><tr><td><a href=https://github.com/spiceai/data-components-contrib/blob/trunk/dataconnectors/file/file.go>file</a></td></tr><tr><td><a href=https://github.com/spiceai/data-components-contrib/blob/trunk/dataconnectors/influxdb/influxdb.go>influxdb</a></td></tr></tbody></table><h3 id=dataspacesdataconnectorparams><code>dataspaces[*].data.connector.params</code></h3><p>A <code>map</code> of key-value pairs that are used to control the behavior of the connector.</p><p><strong>Example</strong>
The <code>file</code> connector uses the <code>path</code> param to control which file to load.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#204a87;font-weight:700>data</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>connector</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>file</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>params</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>path</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>data.csv</span><span style=color:#f8f8f8;text-decoration:underline>
</span></code></pre></div><h3 id=dataspacesdataprocessor><code>dataspaces[*].data.processor</code></h3><p>Once the data has been fetched with the connector, it needs to be processed into a format that Spice.ai can understand. The processor specified here will take the raw data from the connector and transform it into the observations that the Spice.ai runtime expects.</p><p><strong>Example</strong>
The <code>csv</code> processor will process the data coming from the <code>file</code> connector.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#204a87;font-weight:700>data</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>connector</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>file</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>params</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>path</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>data.csv</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>processor</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>csv</span><span style=color:#f8f8f8;text-decoration:underline>
</span></code></pre></div><h3 id=dataspacesdataprocessorname><code>dataspaces[*].data.processor.name</code></h3><p>The name of the processor to use.</p><p>The following processors are currently supported:</p><table><thead><tr><th>Processor Name</th></tr></thead><tbody><tr><td><a href=https://github.com/spiceai/data-components-contrib/blob/trunk/dataprocessors/csv/csv.go>csv</a></td></tr><tr><td><a href=https://github.com/spiceai/data-components-contrib/blob/trunk/dataprocessors/flux/fluxcsv.go>flux-csv</a></td></tr></tbody></table><h3 id=dataspacesdataprocessorparams><code>dataspaces[*].data.processor.params</code></h3><p>A <code>map</code> of key-value pairs that are used to control the behavior of the processor.</p><h3 id=dataspacesactions><code>dataspaces[*].actions</code></h3><p>A <code>map</code> of dataspace actions. The <code>key</code> is the name of the action to perform, the <code>value</code> is a python code block that will be executed whenever this action is taken during a training run.</p><p>This can be used to simulate effects of actions taken during a training run on the observation space. Arguments can be passed into this dataspace action and can be referenced within the python code by prefixing the argument with <code>args.</code></p><p><strong>Example</strong></p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#204a87;font-weight:700>dataspaces</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>from</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>local</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>portfolio</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>fields</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>usd_balance</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>btc_balance</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>actions</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>buy</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>|</span><span style=color:#8f5902;font-style:italic>
</span><span style=color:#8f5902;font-style:italic>        usd_balance -= args.price
</span><span style=color:#8f5902;font-style:italic>        btc_balance += 1</span><span style=color:#f8f8f8;text-decoration:underline>        
</span></code></pre></div><h3 id=dataspaceslaws><code>dataspaces[*].laws</code></h3><p>A list of dataspace laws. Each item is a python expression that is evaluated during a training run to ensure that certain conditions aren&rsquo;t violated. If the Spice.ai runtime attempts to take an action that would violate a law, any dataspace actions that would have affected the observation space are not applied and a negative reward is applied to the timestep.</p><p><strong>Example</strong></p><p>In this example, if the <code>usd_balance</code> would go below 0, the dataspace action that would affect the <code>usd_balance</code> is not applied to the observation space.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#204a87;font-weight:700>dataspaces</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>from</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>local</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>portfolio</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>fields</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>usd_balance</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>btc_balance</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>actions</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>buy</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>|</span><span style=color:#8f5902;font-style:italic>
</span><span style=color:#8f5902;font-style:italic>      usd_balance -= args.price
</span><span style=color:#8f5902;font-style:italic>      btc_balance += 1</span><span style=color:#f8f8f8;text-decoration:underline>      
</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>laws</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#000>usd_balance &gt;= 0</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#000>btc_balance &gt;= 0</span><span style=color:#f8f8f8;text-decoration:underline>
</span></code></pre></div><h2 id=actions><code>actions</code></h2><p><strong>Required</strong>. The set of actions that the Spice.ai runtime can choose from when giving recommendations.</p><p><strong>Example</strong></p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#204a87;font-weight:700>actions</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>jump</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>move_right</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>move_left</span><span style=color:#f8f8f8;text-decoration:underline>
</span></code></pre></div><h3 id=actionsname><code>actions[*].name</code></h3><p>The name of the action that can be taken. The action name should not include any spaces.</p><h3 id=actionsdo><code>actions[*].do</code></h3><p>An optional section that specifies which datasource action should be invoked whenever this action is selected during a training run.</p><p><strong>Example</strong></p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#204a87;font-weight:700>actions</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>buy</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>do</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>local.portfolio.buy</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>args</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>price</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>coinbase.btcusd.close</span><span style=color:#f8f8f8;text-decoration:underline>
</span></code></pre></div><h3 id=actionsdoname><code>actions[*].do.name</code></h3><p>The fully-qualified name of the dataspace action to invoke. A fully qualified name takes the form of:</p><p><code>dataspace.from</code>.<code>dataspace.name</code>.<code>dataspace.actions[*].name</code></p><p><strong>Example</strong></p><p>A dataspace defined as:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#204a87;font-weight:700>dataspaces</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>from</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>local</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>portfolio</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>fields</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>btc_balance</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>actions</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>buy</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>|</span><span style=color:#8f5902;font-style:italic>
</span><span style=color:#8f5902;font-style:italic>    </span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000>btc_balance += 1</span><span style=color:#f8f8f8;text-decoration:underline>
</span></code></pre></div><p>would have a fully-qualified action name of <code>local.portfolio.buy</code> and would be referenced as:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#204a87;font-weight:700>actions</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>buy</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>do</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>local.portfolio.buy</span><span style=color:#f8f8f8;text-decoration:underline>
</span></code></pre></div><h3 id=actionsdoargs><code>actions[*].do.args</code></h3><p>A <code>map</code> of arguments to pass to the dataspace action. The <code>key</code> can be referenced by name in the defining dataspace action definition prefixed by <code>args.</code>. The <code>value</code> can be a constant or a fully qualified dataspace field.</p><p>A fully qualified dataspace field takes the form of:</p><p><code>dataspace.from</code>.<code>dataspace.name</code>.<code>dataspace.field[*].name</code></p><p><strong>Example</strong></p><p>A dataspace with the following definition:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#204a87;font-weight:700>dataspaces</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>from</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>game</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>world</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>fields</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>player_position</span><span style=color:#f8f8f8;text-decoration:underline>
</span></code></pre></div><p>could be referenced in the <code>args</code> as <code>game.world.player_position</code>:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#204a87;font-weight:700>actions</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>pick_up_coin</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>do</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>game.character.pick_up_coin</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>args</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>position</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>game.world.player_position</span><span style=color:#f8f8f8;text-decoration:underline>
</span></code></pre></div><p>and could be referenced in the dataspace action with <code>args.position</code>:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#204a87;font-weight:700>dataspaces</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>from</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>game</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>character</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>fields</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>coins</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>actions</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>pick_up_coin</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>|</span><span style=color:#8f5902;font-style:italic>
</span><span style=color:#8f5902;font-style:italic>        if args.position &gt; 10:
</span><span style=color:#8f5902;font-style:italic>          game.character.coins += 1</span><span style=color:#f8f8f8;text-decoration:underline>        
</span></code></pre></div><h2 id=training><code>training</code></h2><p><strong>Required</strong>. Controls the training process for Spice.ai.</p><p><strong>Example</strong></p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#204a87;font-weight:700>training</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>rewards</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>reward</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>buy</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>with</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>reward = 1</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>reward</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>sell</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>with</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>reward = 1</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>reward</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>hold</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>with</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>reward = 1</span><span style=color:#f8f8f8;text-decoration:underline>
</span></code></pre></div><h3 id=traininggoal><code>training.goal</code></h3><p>End the training early if Spice.ai reaches a training goal three times in a row.</p><p>After a single episode is completed from a training run, a <code>score</code> is kept of the cumulative rewards that the Spice.ai runtime received. Use the <code>goal</code> here to write a python expression to check if the training goal has been met.</p><p><strong>Example</strong></p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#204a87;font-weight:700>training</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>goal</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>score &gt;= 100</span><span style=color:#f8f8f8;text-decoration:underline>
</span></code></pre></div><h3 id=trainingreward_init><code>training.reward_init</code></h3><p>A python code block that will be run before an action specific reward code block runs. Use this to define common variables that will be useful to reference in the specific reward code blocks.</p><p>Access observation state variables by specifying their fully qualified names and prefixing with <code>prev_state.</code> for the value at the previous state before the action was taken, and <code>new_state.</code> for the value of the state right after the action was taken.</p><p><strong>Example</strong></p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#204a87;font-weight:700>training</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>reward_init</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>|</span><span style=color:#8f5902;font-style:italic>
</span><span style=color:#8f5902;font-style:italic>    # Compute price change between previous state and this one 
</span><span style=color:#8f5902;font-style:italic>    # so it can be used in all three reward functions
</span><span style=color:#8f5902;font-style:italic>    prev_price = prev_state.coinbase.btcusd.close
</span><span style=color:#8f5902;font-style:italic>    new_price = new_state.coinbase.btcusd.close
</span><span style=color:#8f5902;font-style:italic>    change_in_price = new_price - prev_price</span><span style=color:#f8f8f8;text-decoration:underline>    
</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>rewards</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>reward</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>buy</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>with</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>reward = -change_in_price</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>reward</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>sell</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>with</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>reward = change_in_price</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>reward</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>hold</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>with</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>|</span><span style=color:#8f5902;font-style:italic>
</span><span style=color:#8f5902;font-style:italic>        if change_in_price &gt; 0:
</span><span style=color:#8f5902;font-style:italic>          reward = -0.1
</span><span style=color:#8f5902;font-style:italic>        else:
</span><span style=color:#8f5902;font-style:italic>          reward = 0.1</span><span style=color:#f8f8f8;text-decoration:underline>        
</span></code></pre></div><h3 id=trainingrewards><code>training.rewards</code></h3><p><strong>Required</strong>. Defines how to reward the Spice.ai runtime during training so that it learns to take more intelligent actions.</p><p>This can be a list of reward definitions or the string &ldquo;uniform&rdquo; to indicate that all rewards should receive the same reward.</p><p><strong>Example</strong></p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#204a87;font-weight:700>training</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>rewards</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>uniform</span><span style=color:#f8f8f8;text-decoration:underline>
</span></code></pre></div><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#204a87;font-weight:700>training</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>rewards</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>reward</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>buy</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>with</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>reward = 1</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>reward</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>sell</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>with</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>reward = 1</span><span style=color:#f8f8f8;text-decoration:underline>
</span></code></pre></div><h3 id=trainingrewardsreward><code>training.rewards[*].reward</code></h3><p>The name of the action to associate this reward function with. Should be the same name as an action defined in <a href=#actions>actions</a></p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#204a87;font-weight:700>actions</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>jump</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>training</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>rewards</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>reward</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>jump</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>with</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>reward = 1</span><span style=color:#f8f8f8;text-decoration:underline>
</span></code></pre></div><h3 id=trainingrewardswith><code>training.rewards[*].with</code></h3><p>A python code block that needs to assign a variable to <code>reward</code> to specify which reward to give the Spice.ai agent for taking this action.</p><p>Access observation state variables by specifying their fully qualified names and prefixing with <code>prev_state.</code> for the value at the previous state before the action was taken, and <code>new_state.</code> for the value of the state right after the action was taken.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#204a87;font-weight:700>training</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>rewards</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>reward</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>jump</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>with</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>|</span><span style=color:#8f5902;font-style:italic>
</span><span style=color:#8f5902;font-style:italic>        # If we weren&#39;t able to jump, penalize trying to jump
</span><span style=color:#8f5902;font-style:italic>        if new_state.game.character.height &gt; prev_state.game.character.height:
</span><span style=color:#8f5902;font-style:italic>          reward = 1
</span><span style=color:#8f5902;font-style:italic>        else:
</span><span style=color:#8f5902;font-style:italic>          reward = -1</span><span style=color:#f8f8f8;text-decoration:underline>        
</span></code></pre></div><div class=section-index><hr class=panel-line><div class=entry><h5><a href=/reference/pod/samples-gardener/>Gardener</a></h5><p></p></div><div class=entry><h5><a href=/reference/pod/quickstarts-trader/>Trader</a></h5><p></p></div><div class=entry><h5><a href=/reference/pod/samples-serverops/>Server Ops</a></h5><p></p></div></div><div class="text-muted mt-5 pt-3 border-top"></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank rel=noopener href=https://twitter.com/SpiceAIHQ aria-label=Twitter><i class="fab fa-twitter"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/spiceai/spiceai aria-label=GitHub><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Discord aria-label=Discord><a class=text-white target=_blank rel=noopener href=https://discord.com/channels/803820740868571196/803820740868571199 aria-label=Discord><i class="fab fa-discord"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2021 Spice AI, Inc. All Rights Reserved</small></div></div></div></footer></div><script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js integrity=sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF crossorigin=anonymous></script><script src=/js/tabpane-persist.js></script><script src=/js/main.min.5c74b870c6953931a705f390a49c7e4c0a842ec5c83b24354758dd674343ed0d.js integrity="sha256-XHS4cMaVOTGnBfOQpJx+TAqELsXIOyQ1R1jdZ0ND7Q0=" crossorigin=anonymous></script></body></html>